[{"name":"app.r","content":"library(gsheet)\r\nlibrary(tidyverse)\r\nlibrary(shiny)\r\nlibrary(ggplot2)\r\nrequire(shinylive)\r\n#input <- 'C:/Users/viy009/OneDrive - University of Bergen/PhD/KJEM250/ControlChart/T1'\r\n#output <- 'C:/Users/viy009/OneDrive - University of Bergen/PhD/KJEM250/ControlChart/OutputT1'\r\n#export(input,output)\r\n\r\n\r\n# Define the URL of your Google Sheets\r\n#sheet_url <- \"https://docs.google.com/spreadsheets/d/e/2PACX-1vQ8cGfA3AW7mU3DCMsYnjUkJZsfqUL5yJpg6USPEffM4sFGeKqg4DParhUM-mBe-Wof-zXLCtMdlKRL/pub?output=csv\"\r\n\r\n# Define the UI\r\nui <- fluidPage(\r\n  titlePanel(\"Plotting Data from Google Sheets\"),\r\n  #sidebarLayout(\r\n   # sidebarPanel(\r\n    #  # Add input controls here if needed\r\n  #  ),\r\n    mainPanel(\r\n      plotOutput(\"dataPlot\") # Output plot\r\n    )\r\n  )\r\n#)\r\n\r\n\r\n\r\n# Define server logic\r\nserver <- function(input, output) {\r\n \r\n    \r\n  \r\n  output$dataPlot <- renderPlot({\r\n    # Read the data from Google Sheets\r\n   # df <- data.frame(read.csv(text = gsheet2text(sheet_url)))\r\n\r\n    df <- read.csv('https://docs.google.com/spreadsheets/d/e/2PACX-1vQ8cGfA3AW7mU3DCMsYnjUkJZsfqUL5yJpg6USPEffM4sFGeKqg4DParhUM-mBe-Wof-zXLCtMdlKRL/pub?output=csv')\r\n    \r\n    df[,4] <- as.numeric(gsub(\",\", \".\", df[,4]))\r\n    df <- data.frame(x=df[,2],y=df[,4])\r\n    df <- na.omit(df)\r\n    \r\n    \r\n    mu <- mean(df$y)\r\n    sigma <- sd(df$y)\r\n    \r\n    \r\n    ggplot(data = df, aes(x = x , y = y )) +\r\n      geom_point(color = '#73001d', fill = 'black', size = 3)   +\r\n      geom_hline(yintercept = mu, linetype=\"dashed\") +\r\n      geom_hline(yintercept = mu + 2*sigma, linetype=\"dashed\") +\r\n      geom_hline(yintercept = mu - 2*sigma, linetype=\"dashed\") +\r\n      geom_hline(yintercept = mu + 3*sigma, linetype=\"dashed\") +\r\n      geom_hline(yintercept = mu - 3*sigma, linetype=\"dashed\") +\r\n#      geom_label(aes(x = Inf, y = mu), label = expression(bar(x)), hjust = -0.3, vjust = 0.5, fill = \"whites\") +\r\n #     geom_label(aes(x = Inf, y = mu + 2*sigma), label = expression(bar(x) + 2 ~ s), hjust =0 , vjust = 0.5, fill = \"white\") +\r\n  #    geom_label(aes(x = Inf, y = mu - 2*sigma), label = expression(bar(x) - 2 ~ s), hjust = 0, vjust = 0.5, fill = \"white\") +\r\n   #   geom_label(aes(x = Inf, y = mu + 3*sigma), label = expression(bar(x) + 3 ~ s), hjust =0, vjust = 0.5, fill = \"white\") +\r\n    #  geom_label(aes(x = Inf, y = mu - 3*sigma), label = expression(bar(x) - 3 ~ s), hjust = 0, vjust = 0.5, fill = \"white\") +\r\n      theme_minimal() +coord_fixed(clip = 'off')+xlab('Group')+\r\n      theme(plot.margin = margin(5.5, 50, 5.5, 5.5)) \r\n  })\r\n  \r\n}\r\n\r\n# Run the application \r\nshinyApp(ui = ui, server = server)\r\n\r\n\r\n\r\n\r\n\r\n","type":"text"}]
